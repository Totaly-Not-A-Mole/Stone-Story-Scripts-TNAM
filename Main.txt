/////////////////////////////////
// Created By Blued_Bandit#8282//
//   and Cupcakesupream#1601   //
/////////////////////////////////
//  animation cancleing script
?item.left.state = 3
  equipL *0 wand //trash
  equipL @item.left@
?item.right.state = 3
  equipR *0 shield //trash
  equip @item.right@

//////////////////////////////////
//  variables are defined here
var attkCnt = 3
var timeSnap = 0
var hpPrcnt
var arPrcnt
var maxarmorMax
var testvar

//////////////////////////////////
//  UI elements are defined here
import UI/MindstoneButton
enable npcDialog
//HitPoint and ARmor Percentages
hpPrcnt = hp * 100
hpPrcnt = hpPrcnt / maxhp
?time = 1
  maxarmorMax = 0
?maxarmor > maxarmorMax
  maxarmorMax = maxarmor
arPrcnt = armor * 100
?maxarmor > 0
  arPrcnt = arPrcnt / maxarmor
:
  arPrcnt = arPrcnt / maxarmorMax
>`5,24,#red,%@hpPrcnt@
>`11,24,#cyan,%@arPrcnt@
//Info Printout

>`0,23,Foe.time: @foe.time@
>`0,22,Foe.state: @foe.state@
>`0,21,Foe.distance: @foe.distance@
>`0,20,Foe.id: @foe.id@
>`0,19,Blade CD: @item.getcooldown("blade")@
>`0,18,Mind CD: @item.getcooldown("mind")@
>`0,17,Bardiche CD: @item.getcooldown("bard")@
>`0,16,Hammer CD: @item.getcooldown("heavy")@
>`0,15,Rstate: @item.right.state@
>`0,14,summon count: @summon.count@
>`0,13,Cinder CD: @item.getcooldown("cinderwisp")@

/////////////////////////////////
//  functions are defined here
//mindstone dodge
func dodge(S, T)//state, Animation time
  ?foe.state = S & foe.time = T
        ?item.GetCooldown("mind") <= 0
          equipL mind stone
          equipR compound shield
//blade of the fallen god ability
func godBlade(C)//Count
  ?foe.count >= C
    ?item.getcooldown("blade") <= 0
      equip blade of the fallen god
      activate right
//bardiche ability
func Bardiche()
  ?foe = foe.distance < 12 //change this line as needed
  ^ & item.CanActivate()
  ^ & (item.GetCooldown("bardiche") = 0
  ^ | item.right = "bardiche" //keeps it equipped during the cast
  ^ & item.right.state = 2)
    equip bardiche
    activate R
//heavy hammer ability
func Hammer()
  ?foe = foe.distance < 12 //change this line as needed
  ^ & item.CanActivate()
  ^ & item.GetCooldown("heavy") <= 0
    equip heavy hammer
    activate R
  ?item.right = "heavy" //keeps it equipped during the cast
  ^ & item.right.state = 2
    equip heavy hammer
    activate R
//dashing shield ability
func dash()
  ?item.GetCooldown("dash") <= 0
    equip dash
    activate right
//cinderwisp ability
func cinder(deBuff)//debuff count
  ?item.getcooldown("cinderwisp") <= 0
  ^ & foe.debuffs.Count >= deBuff
    activate cinderwisp
//summon cinderwisp
func summonCinder(sCnt)//summon count
  ?summon.count = sCnt &
  ^item.CanActivate() |
  ^item.right = "fire talisman" &
  ^item.right.state = 2
    equipR fire talisman
    activate right
/////////////////////////////////

?loc = Icy Ridge

  ?hpPrcnt < 15
    activate potion

  godBlade(4)

  ?foe = boss
    ?foe.distance > 3
      equipR dash
      equipL gra
      ?foe.distance > 10
        equipR dash
        equipL tri
    ?foe.distance = 3
      equip shovel
    ?foe.distance < 3
      equipL fire sword
      equipR compound shield
    godBlade(0)
    Bardiche()

  ?foe.id = ice_wall
    Bardiche()

  ?foe ! boss 
    ?foe.GetCount(15) >= 3
      equip bardiche
    :
      equipL fire sword
      equipR compound shield

  

/////////////////////////////////

?loc = Mushroom
  equipL fire sword
  equipR compound shield
  ?armor > 4 & foe.GetCount(20) >= 3
    equip bardiche
  ?foe = boss
    equip bardiche
    Bardiche()

/////////////////////////////////

?loc = Halls
  ?time = 1
    var HEnm
    HEnm = 0
  equip the ghost slayer
  ?foe.count >=6 & HEnm < 1
    godBlade(6)
    Henm = 10
  ?hpPrcnt < 50
    activate potion
  dodge(32, 60)
      
/////////////////////////////////

?loc = Rocky
  ?loc.loop
    attkCnt = 3
    timeSnap = 0
  disable npcDialog

  ?summon.count = 0
    summonCinder(0)
  cinder(10)
  :?foe ! boss
    ?pickup.distance < 5
      equipL star stone
      equipR triskelion
    :
      equipL triskelion
      equipR compound shield

  :?foe = acronian_scout
    godBlade(0)
    Bardiche()
    ?foe.debuffs.string ! "damage:1"
      equipL poison sword
      equipR compound shield
    :?hpPrcnt < 100
      equip the ghost slayer
    :
      equipL ice sword
      equipR compound shield

  :?foe = boss

    ?foe = phase1
      ?foe.debuffs.string ! "damage:1"
        equipL poison sword
        equipR compound shield
      :?foe.debuffs.string ! "Chill:6"
        equipL ice sword
        equipR compound shield
      :?hpPrcnt < 50
        equip the ghost slayer
      :
        equipL fire sword
        equipR compound shield
      Bardiche() 

    ?foe = phase2
      ?foe = poison
        equipL ice sword
        equipR compound shield
      :?foe = ice
        equipL fire sword
        equipR compound shield
      :?foe = fire
        equipL aether wand
        equipR compound shield
      :?foe = aether
        equip the ghost slayer
      :?foe = vigor
        equipL poison sword
        equipR compound shield

    ?foe = phase3
      ?foe.state = 32 & timeSnap < time | foe.state = 115 & timeSnap < time
        timeSnap = time
        timeSnap = timeSnap + 100
        ?attkCnt >= 6 
          attkCnt = 0
        attkCnt = attkCnt + 1
      equipL fire sword
      equipR compound shield
      ?foe.armor >= 50
        equip heavy hammer
      :?foe.debuffs.string ! "Chill:6"
        equipL ice sword
        equipR compound shield
      :?foe.debuffs.string ! "damage:1"
        equipL poison sword
        equipR compound shield
      :?hpPrcnt <= 20
        activate potion
      :?hpPrcnt < 100
        equip the ghost slayer
      :
        equipL fire sword
        equipR compound shield
      ?attkCnt >=6 & foe.state ! 107
        Hammer()
        equip hammer
        ?loc.stars <= 13
          dodge(32, 35)
        :
          dodge(32, 50)
      dodge(115, 60)
  
/////////////////////////////////

?loc = Deadwood
  ?foe ! boss
    equip the ghost slayer
    ?foe.name = Stone Scarab
      equipL fire sword
      equipR compound shield
    ?foe.count >= 4
      ?item.getcooldown("blade") <= 0
        equip blade of the fallen god
        activate right
  ?foe = boss
    ?hpPrcnt <= 50
      activate potion
    ?foe = phase1
      ?foe.state = 2
        equipR fire sword
        equipL poison sword
    ?foe = phase2
      equipL fire sword
      equipR compound shield
      ?foe.buffs.string = "poena_mirror:1"
        equip the ghost slayer

/////////////////////////////////

?loc = Caves of Fear
  equip aether crossbow
  ?pickup.distance < 5
    equipL star stone
    equipR triskelion
  godBlade(6)
  ?foe = boss
    dodge(32, 20)
    Bardiche()
    ?foe.debuffs.string ! "damage:1"
      equipL poison sword
      equipR compound shield
    :?foe.debuffs.string ! "Chill:6"
      equipL ice sword
      equipR compound shield
    :?hpPrcnt < 100
      equip the ghost slayer
    :
      equipL fire sword
      equipR compound shield

/////////////////////////////////
